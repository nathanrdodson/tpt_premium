jQuery(document).ready(function($){function isSectionActive(sectionId){var url=window.location.href;return-1!==url.indexOf("tab=tiered_pricing_table_settings")&&("general"===sectionId&&-1===url.indexOf("section="+sectionId)||-1!==url.indexOf("section="+sectionId))}function TieredPricingSettingsPage(){this.rows=[],this.init=function(rows){this.rows=rows,this.renderSettings()},this.getRowById=function(id){return this.rows.find(row=>row.id=id)},this.renderSettings=function(){this.rows.forEach(row=>row.shouldBeShown()?row.show():row.hide())}}function TieredPricingSettingsRow(id,dependencies={}){this.prefix="tier_pricing_table_",this.id=id,this.settingsPage=null,this.dependencies=dependencies,this.init=function(settingsPage){this.settingsPage=settingsPage,this.$getRow(!1).on("change",()=>this.settingsPage.renderSettings())},this.show=function(){this.$getRow().closest("tr").show()},this.hide=function(){this.$getRow().closest("tr").hide()},this.isChecked=function(){return this.$getRow().is(":checked")},this.isValueEqual=function(value){return this.$getRow().val()===value},this.shouldBeShown=function(){let pass=!0;for(var[rowID,value]of Object.entries(this.dependencies)){const row=this.settingsPage.getRowById(rowID);if(row)if(":checked"===value)pass=pass&&row.isChecked();else if(":unchecked"===value)pass=pass&&!row.isChecked();else if("string"==typeof value)pass=pass&&row.isValueEqual(value);else if(value.constructor===Array){let _pass=!1;value.forEach(_value=>{_pass=_pass||row.isValueEqual(_value)}),pass=pass&&_pass}}return pass},this.$getRow=function(any=!0){let input=$('[name="'+this.prefix+this.id+'"]');return input=any&&input.is(":radio")?input.filter(":checked"):input}}if(isSectionActive("general")){var display=new TieredPricingSettingsRow("display"),displayTypeRow=new TieredPricingSettingsRow("display_type",{}),quantityType=new TieredPricingSettingsRow("quantity_type",{}),tooltipColor=new TieredPricingSettingsRow("tooltip_color",{display_type:"tooltip"}),tooltipSize=new TieredPricingSettingsRow("tooltip_size",{display_type:"tooltip"}),tooltipBorder=new TieredPricingSettingsRow("tooltip_border",{display_type:"tooltip"}),pricingTitle=new TieredPricingSettingsRow("table_title",{display_type:["blocks","table","options","dropdown","horizontal-table","plain-text"]}),pricingPlace=new TieredPricingSettingsRow("position_hook",{display:":checked",display_type:["blocks","table","options","dropdown","horizontal-table","plain-text"]}),activeTierColor=new TieredPricingSettingsRow("selected_quantity_color",{}),TABLE_QuantityMeasurement=new TieredPricingSettingsRow("table_quantity_measurement[singular]",{display_type:["table","tooltip","horizontal-table"]}),BLOCKS_QuantityMeasurement=new TieredPricingSettingsRow("blocks_quantity_measurement[singular]",{display_type:"blocks"}),BLOCKS_styles=new TieredPricingSettingsRow("pricing_blocks_style",{display_type:"blocks"}),quantityColumnTitle=new TieredPricingSettingsRow("head_quantity_text",{display_type:["tooltip","table","horizontal-table"]}),priceColumnTitle=new TieredPricingSettingsRow("head_price_text",{display_type:["tooltip","table","horizontal-table"]}),discountColumnTitle=new TieredPricingSettingsRow("head_discount_text",{display_type:["tooltip","table","horizontal-table"]}),showDiscountColumn=new TieredPricingSettingsRow("show_discount_column",{display_type:["blocks"]}),updateTieredPricingOnClick=new TieredPricingSettingsRow("clickable_table_rows",{}),OPTIONS_optionText=new TieredPricingSettingsRow("options_option_text",{display_type:["options","dropdown"]}),OPTIONS_showDefaultOption=new TieredPricingSettingsRow("options_show_default_option",{display_type:"options"}),OPTIONS_defaultOptionText=new TieredPricingSettingsRow("options_default_option_text",{options_show_default_option:":checked",display_type:["options","dropdown"]}),OPTIONS_showOriginalProductPrice=new TieredPricingSettingsRow("options_show_original_product_price",{display_type:["options","dropdown"]}),PLAIN_TEXT_template=new TieredPricingSettingsRow("plain_text_template",{display_type:"plain-text"}),PLAIN_TEXT_show_first_tier=new TieredPricingSettingsRow("plain_text_show_first_tier",{display_type:"plain-text"}),PLAIN_TEXT_first_tier_template=new TieredPricingSettingsRow("plain_text_first_tier_template",{plain_text_show_first_tier:":checked",display_type:"plain-text"}),display=[display,displayTypeRow,quantityType,tooltipColor,tooltipSize,tooltipBorder,pricingTitle,pricingPlace,activeTierColor,TABLE_QuantityMeasurement,BLOCKS_QuantityMeasurement,BLOCKS_styles,quantityColumnTitle,priceColumnTitle,showDiscountColumn,discountColumnTitle,updateTieredPricingOnClick,OPTIONS_optionText,OPTIONS_showDefaultOption,OPTIONS_defaultOptionText,OPTIONS_showOriginalProductPrice,new TieredPricingSettingsRow("options_show_total",{display_type:"options"}),PLAIN_TEXT_template,PLAIN_TEXT_first_tier_template,PLAIN_TEXT_show_first_tier,new TieredPricingSettingsRow("product_page_price_format"),new TieredPricingSettingsRow("update_price_on_product_page",{product_page_price_format:"custom"}),new TieredPricingSettingsRow("show_tiered_price_as_discount",{update_price_on_product_page:":checked",product_page_price_format:"custom"}),new TieredPricingSettingsRow("show_total_price",{product_page_price_format:"custom"}),new TieredPricingSettingsRow("you_save_enabled"),new TieredPricingSettingsRow("you_save_consider_sale_price",{you_save_enabled:":checked"}),new TieredPricingSettingsRow("you_save_template",{you_save_enabled:":checked"}),new TieredPricingSettingsRow("you_save_text_color",{you_save_enabled:":checked"}),new TieredPricingSettingsRow("non_logged_in_users_prevent_purchase"),new TieredPricingSettingsRow("non_logged_in_users_add_to_cart_label",{non_logged_in_users_prevent_purchase:":checked"}),new TieredPricingSettingsRow("non_logged_in_users_purchase_message",{non_logged_in_users_prevent_purchase:":checked"}),new TieredPricingSettingsRow("non_logged_in_users_hide_prices"),new TieredPricingSettingsRow("non_logged_in_users_price_message",{non_logged_in_users_hide_prices:":checked"}),new TieredPricingSettingsRow("tiered_price_at_catalog"),new TieredPricingSettingsRow("tiered_price_at_catalog_for_variable",{tiered_price_at_catalog:":checked"}),new TieredPricingSettingsRow("tiered_price_at_catalog_type",{tiered_price_at_catalog:":checked"}),new TieredPricingSettingsRow("lowest_prefix",{tiered_price_at_catalog:":checked",tiered_price_at_catalog_type:"lowest"}),new TieredPricingSettingsRow("cart_upsell_enabled"),new TieredPricingSettingsRow("cart_upsell_template",{cart_upsell_enabled:":checked"}),new TieredPricingSettingsRow("cart_upsell_color",{cart_upsell_enabled:":checked"}),new TieredPricingSettingsRow("display_summary"),new TieredPricingSettingsRow("summary_title",{display_summary:":checked"}),new TieredPricingSettingsRow("summary_type",{display_summary:":checked"}),new TieredPricingSettingsRow("summary_total_label",{display_summary:":checked",summary_type:["inline","detailed"]}),new TieredPricingSettingsRow("summary_each_label",{display_summary:":checked",summary_type:"inline"}),new TieredPricingSettingsRow("summary_position_hook",{display_summary:":checked"})];const productPageSettingPage=new TieredPricingSettingsPage;display.forEach(row=>row.init(productPageSettingPage)),productPageSettingPage.init(display)}if(isSectionActive("shop-loop-display")){displayTypeRow=new TieredPricingSettingsRow("shop_loop_display_enabled"),tooltipColor=new TieredPricingSettingsRow("shop_loop_display_position",{shop_loop_display_enabled:":checked"}),tooltipSize=new TieredPricingSettingsRow("shop_loop_display_show_quantity_field",{shop_loop_display_enabled:":checked"}),tooltipBorder=new TieredPricingSettingsRow("shop_loop_display_use_reduced_styles",{shop_loop_display_enabled:":checked"});const youSaveEnabled=new TieredPricingSettingsRow("shop_loop_display_you_save_enabled",{shop_loop_display_enabled:":checked"});pricingPlace=new TieredPricingSettingsRow("shop_loop_display_dynamic_price",{shop_loop_display_enabled:":checked"}),BLOCKS_styles=new function(id,dependencies){this.id="tier_pricing_table_"+id,this.settingsPage=null,this.dependencies=dependencies,this.init=function(settingsPage){this.settingsPage=settingsPage},this.show=function(){this.$getRow().forEach(element=>element.show())},this.hide=function(){this.$getRow().forEach(element=>element.hide())},this.$getRow=function(){var sectionDescription=jQuery("#"+this.id+"-description"),title=sectionDescription.prev("h2"),section=sectionDescription.next("table");return[title,sectionDescription,section]},this.shouldBeShown=function(){let pass=!0;for(var[rowID,value]of Object.entries(this.dependencies)){const row=this.settingsPage.getRowById(rowID);if(row)if(":checked"===value)pass=pass&&row.isChecked();else if(":unchecked"===value)pass=pass&&!row.isChecked();else if("string"==typeof value)pass=pass&&row.isValueEqual(value);else if(value.constructor===Array){let _pass=!1;value.forEach(_value=>{_pass=_pass||row.isValueEqual(_value)}),pass=pass&&_pass}}return pass}}("shop_loop_display_layout_settings",{shop_loop_display_enabled:":checked"}),showDiscountColumn=new TieredPricingSettingsRow("shop_loop_display_layout_settings"),display=new TieredPricingSettingsRow("shop_loop_display_layout",{shop_loop_display_layout_settings:"custom"});const pricingTitle=new TieredPricingSettingsRow("shop_loop_display_title",{shop_loop_display_layout_settings:"custom"}),quantityType=new TieredPricingSettingsRow("shop_loop_display_quantity_type",{shop_loop_display_layout_settings:"custom"}),activeTierColor=new TieredPricingSettingsRow("shop_loop_display_selected_quantity_color",{shop_loop_display_layout_settings:"custom"}),TABLE_QuantityMeasurement=new TieredPricingSettingsRow("shop_loop_display_table_quantity_measurement[singular]",{shop_loop_display_layout_settings:"custom",shop_loop_display_layout:["table","horizontal-table"]}),BLOCKS_QuantityMeasurement=new TieredPricingSettingsRow("shop_loop_display_blocks_quantity_measurement[singular]",{shop_loop_display_layout_settings:"custom",shop_loop_display_layout:"blocks"});var BLOCKS_showDiscount=new TieredPricingSettingsRow("shop_loop_display_blocks_show_discount",{shop_loop_display_layout_settings:"custom",shop_loop_display_layout:"blocks"});const quantityColumnTitle=new TieredPricingSettingsRow("shop_loop_display_quantity_column_title",{shop_loop_display_layout_settings:"custom",shop_loop_display_layout:["table","horizontal-table"]}),priceColumnTitle=new TieredPricingSettingsRow("shop_loop_display_price_column_title",{shop_loop_display_layout_settings:"custom",shop_loop_display_layout:["table","horizontal-table"]}),discountColumnTitle=new TieredPricingSettingsRow("shop_loop_display_discount_column_title",{shop_loop_display_layout_settings:"custom",shop_loop_display_layout:["table","horizontal-table"]}),updateTieredPricingOnClick=new TieredPricingSettingsRow("shop_loop_display_clickable_table_rows",{shop_loop_display_layout_settings:"custom"}),OPTIONS_showOriginalProductPrice=new TieredPricingSettingsRow("shop_loop_display_options_show_original_product_price",{shop_loop_display_layout_settings:"custom",shop_loop_display_layout:["dropdown","options"]}),OPTIONS_showTotal=new TieredPricingSettingsRow("shop_loop_display_options_show_total",{shop_loop_display_layout_settings:"custom",shop_loop_display_layout:"options"}),OPTIONS_optionText=new TieredPricingSettingsRow("shop_loop_display_options_option_text",{shop_loop_display_layout_settings:"custom",shop_loop_display_layout:["dropdown","options"]}),OPTIONS_showDefaultOption=new TieredPricingSettingsRow("shop_loop_display_options_show_default_option",{shop_loop_display_layout_settings:"custom",shop_loop_display_layout:"options"}),OPTIONS_defaultOptionText=new TieredPricingSettingsRow("shop_loop_display_options_default_option_text",{shop_loop_display_layout_settings:"custom",shop_loop_display_layout:["dropdown","options"]}),PLAIN_TEXT_template=new TieredPricingSettingsRow("shop_loop_display_plain_text_template",{shop_loop_display_layout_settings:"custom",shop_loop_display_layout:"plain-text"}),PLAIN_TEXT_show_first_tier=new TieredPricingSettingsRow("shop_loop_display_plain_text_show_first_tier",{shop_loop_display_layout_settings:"custom",shop_loop_display_layout:"plain-text"}),PLAIN_TEXT_first_tier_template=new TieredPricingSettingsRow("shop_loop_display_plain_text_first_tier_template",{shop_loop_display_layout_settings:"custom",shop_loop_display_layout:"plain-text"}),productPageSettingPage=new TieredPricingSettingsPage;let rows=[displayTypeRow,tooltipColor,tooltipSize,tooltipBorder,youSaveEnabled,pricingPlace,BLOCKS_styles,showDiscountColumn,display,quantityType,pricingTitle,activeTierColor,TABLE_QuantityMeasurement,BLOCKS_QuantityMeasurement,BLOCKS_showDiscount,quantityColumnTitle,priceColumnTitle,discountColumnTitle,updateTieredPricingOnClick,OPTIONS_optionText,OPTIONS_showDefaultOption,OPTIONS_defaultOptionText,OPTIONS_showOriginalProductPrice,OPTIONS_showTotal,PLAIN_TEXT_template,PLAIN_TEXT_first_tier_template,PLAIN_TEXT_show_first_tier];rows.forEach(row=>row.init(productPageSettingPage)),productPageSettingPage.init(rows)}});
